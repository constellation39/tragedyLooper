syntax = "proto3";

package proto.v1;

import "proto/v1/ability.proto";
import "proto/v1/enums.proto";
import "proto/v1/location.proto";

option go_package = "github.com/user/repo/proto/model";

// Character 表示游戏中的一个角色。
message Character {
  int32 id = 1; // 唯一标识符
  string name = 2; // 角色名称
  repeated string traits = 3; // 角色特征，例如：["Student", "Journalist"]
  LocationType current_location = 4; // 当前所在位置
  int32 paranoia = 5; // 妄想指数
  int32 goodwill = 6; // 好感度
  int32 intrigue = 7; // 阴谋标记
  bool is_alive = 8; // 是否存活
  repeated Ability abilities = 9; // 角色能力
  RoleType hidden_role = 10; // 角色的隐藏身份，对主角隐藏，仅供主谋查看
  repeated CharacterRule rules = 11; // 角色的特殊规则
}

// CharacterRule 定义角色的特殊规则。
message CharacterRule {
  TriggerType trigger = 1;
  string description = 2;
  oneof effect {
    TurfSelectionEffect turf_selection = 3;
    DelayedEntryEffect delayed_entry = 4;
  }
}


// TurfSelectionEffect 表示需要为 Boss 选择地盘。
message TurfSelectionEffect {
}

// DelayedEntryEffect 表示角色延迟登场。
message DelayedEntryEffect {
}

// CharacterConfig 定义特定剧本中角色的初始状态。
message CharacterConfig {
  int32 id = 1; // 引用基础角色定义
  string name = 2; // 角色名称
  LocationType initial_location = 3; // 初始位置
  RoleType hidden_role = 4; // 此剧本中角色的秘密身份
  string is_culprit_for = 5; // 如果此角色是特定悲剧的嫌疑犯
}