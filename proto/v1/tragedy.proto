syntax = "proto3";

package proto.v1;

import "proto/v1/ability.proto";
import "proto/v1/enums.proto";
import "proto/v1/location.proto";

option go_package = "github.com/user/repo/proto/model";

// TragedyCondition 定义悲剧发生的条件。
message TragedyCondition {
  TragedyType tragedy_type = 1; // 悲剧类型
  int32 day = 2; // 悲剧可能发生的日期
  string culprit_id = 3; // 嫌疑人ID
  repeated Condition conditions = 4; // 必须满足的条件列表
  TargetRuleType target_rule = 5; // 目标规则
  repeated Ability abilities = 6; // 悲剧发生时触发的能力
  bool is_active = 7; // 运行时状态：此悲剧当前是否在剧本中活跃？
  bool is_prevented = 8; // 运行时状态：此悲剧是否已被阻止？
}

// Condition 定义悲剧的一个单一条件。
message Condition {
  int32 character_id = 1; // 角色ID
  LocationType location = 2; // 所在位置
  int32 min_paranoia = 3; // 最小妄想指数
  bool is_alone = 4; // 是否独处
}
