syntax = "proto3";

package v1;

option go_package = "tragedylooper/internal/game/proto/v1";

// 玩家角色
enum PlayerRole {
  PLAYER_ROLE_UNSPECIFIED = 0; // 未指定
  MASTERMIND = 1; // 主谋
  PROTAGONIST = 2; // 主角
}

// 游戏阶段
enum GamePhase {
  GAME_PHASE_UNSPECIFIED = 0; // 未指定
  SETUP = 1; // 游戏设置阶段
  MASTERMIND_SETUP = 2; // 主谋设置阶段
  LOOP_START = 3; // 循环开始阶段
  DAY_START = 4; // 日开始阶段
  CARD_PLAY = 5; // 卡牌打出阶段
  CARD_REVEAL = 6; // 卡牌揭示阶段
  CARD_RESOLVE = 7; // 卡牌结算阶段
  ABILITIES = 8; // 能力结算阶段
  INCIDENTS = 9; // 事件结算阶段
  DAY_END = 10; // 日结束阶段
  LOOP_END = 11; // 循环结束阶段
  PROTAGONIST_GUESS = 12; // 主角推理阶段
  GAME_OVER = 13; // 游戏结束阶段
}

// 卡牌类型
enum CardType {
  CARD_TYPE_UNSPECIFIED = 0; // 未指定
  MOVEMENT = 1; // 移动
  PARANOIA_PLUS = 2; // 增加妄想
  PARANOIA_MINUS = 3; // 减少妄想
  GOODWILL_PLUS = 4; // 增加好感
  GOODWILL_MINUS = 5; // 减少好感
  INTRIGUE_PLUS = 6; // 增加阴谋
  FORBID_MOVEMENT = 7; // 禁止移动
  FORBID_PARANOIA = 8; // 禁止妄想变化
  FORBID_GOODWILL = 9; // 禁止好感变化
  FORBID_INTRIGUE = 10; // 禁止阴谋变化
}

// 角色身份类型
enum RoleType {
  ROLE_TYPE_UNSPECIFIED = 0; // 未指定
  PERSON = 1; // 普通人
  KILLER = 2; // 杀手
  BRAIN = 3; // 洗脑者
  KEY_PERSON = 4; // 关键人物
  CULTIST = 5; // 邪教徒
  FRIEND = 6; // 朋友
  LOVED_ONE = 7; // 恋人
  CONSPIRACY_THEORIST = 8; // 阴谋论者
  SERIAL_KILLER = 9; // 连环杀手
  FACTOR = 10; // X因素
  WITCH = 11; // 女巫
  TIME_TRAVELER = 12; // 时间旅行者
}

// 事件类型
enum IncidentType {
  INCIDENT_TYPE_UNSPECIFIED = 0; // 未指定
  MURDER = 1; // 杀人事件
  SUICIDE = 2; // 自杀
  ACCIDENT = 3; // 意外死亡
  DISAPPEARANCE = 4; // 失踪
  HOSPITAL_CONSPIRACY = 5; // 医院阴谋
  MURDER_MYSTERY = 6; // 谋杀之谜
  PANIC = 7; // 恐慌爆发
}

// 悲剧集合类型
enum TragedySetType {
  TRAGEDY_SET_TYPE_UNSPECIFIED = 0; // 未指定
  BASIC_TRAGEDY = 1; // 基础悲剧
  FIRST_STEP = 2; // 最初的悲剧
  MIDNIGHT_ZONE = 3; // 午夜禁区
  GHOSTLY_MIST = 4; // 魅影薄雾
  // 可根据扩展包增加
}

// 剧本难度
enum ScriptDifficulty {
  SCRIPT_DIFFICULTY_UNSPECIFIED = 0; // 未指定
  EASY = 1; // 简单
  NORMAL = 2; // 普通
  HARD = 3; // 困难
  EXPERT = 4; // 专家
}

// 剧情类型
enum PlotType {
  PLOT_TYPE_UNSPECIFIED = 0; // 未指定
  MAIN_PLOT = 1; // 主线剧情
  SUB_PLOT = 2; // 支线剧情
}

// 地点类型（也可通过LocationConfig扩展）
enum LocationType {
  LOCATION_TYPE_UNSPECIFIED = 0; // 未指定
  HOSPITAL = 1; // 医院
  SHRINE = 2; // 神社
  CITY = 3; // 城市
  SCHOOL = 4; // 学校
  // 可根据具体剧本扩展
}

// 触发器类型（能力或规则何时触发）
enum TriggerType {
  TRIGGER_TYPE_UNSPECIFIED = 0; // 未指定
  ON_GAME_SETUP = 1; // 游戏设置时
  ON_LOOP_START = 2; // 循环开始时
  ON_DAY_START = 3; // 每天开始时
  ON_PHASE_START = 4; // 特定阶段开始时（需配合GamePhase）
  ON_PHASE_END = 5; // 特定阶段结束时（需配合GamePhase）
  ON_GAME_EVENT = 6; // 发生特定游戏事件时
  PASSIVE = 7; // 被动（条件满足时持续生效）
  ON_GUESS_MADE = 8; // 推理发生时
  ON_GAME_END = 9; // 游戏结束时
  ON_DAY_END = 10; // 每日结束时
  ON_LOOP_END = 11; // 循环结束时
}

// 游戏事件类型（用于能力触发器过滤）
enum GameEventType {
  GAME_EVENT_TYPE_UNSPECIFIED = 0; // 未指定
  CHARACTER_MOVED = 1; // 角色移动事件
  PARANOIA_ADJUSTED = 2; // 妄想值调整事件
  GOODWILL_ADJUSTED = 3; // 好感值调整事件
  INTRIGUE_ADJUSTED = 4; // 阴谋值调整事件
  INCIDENT_TRIGGERED = 5; // 悲剧触发事件
  INCIDENT_PREVENTED = 6; // 悲剧阻止事件
  ROLE_REVEALED = 7; // 角色身份揭示事件
  ABILITY_GRANTED = 8; // 授予能力事件
  CHOICE_REQUIRED = 9; // 需要玩家选择事件
  LOOP_WIN = 10; // 循环胜利事件
  LOOP_LOSS = 11; // 循环失败事件
  FIRST_GUESS_MADE = 12; // 首次猜测事件
  FINAL_GUESS_MADE = 13; // 最终猜测事件
  GOODWILL_REFUSAL_TEST = 14; // 好感度拒绝测试事件
  LOOP_OVER = 15; // 循环结束事件
  DAY_ADVANCED = 16; // 天数推进事件
  TRAGEDY_TRIGGERED = 17; // 悲剧触发事件
  LOOP_RESET = 18; // 循环重置事件
  TRAIT_ADDED = 19; // 特性添加事件
  TRAIT_REMOVED = 20; // 特性移除事件
  CARD_PLAYED = 21; // 卡牌打出事件
  CARD_REVEALED = 22; // 卡牌揭示事件
  GAME_ENDED = 23; // 游戏结束事件
  PLAYER_ACTION = 24; // 玩家行动事件
}

// 游戏结束条件类型
enum EndConditionType {
  END_CONDITION_TYPE_UNSPECIFIED = 0; // 未指定
  PROTAGONIST_GUESS_SUCCESS = 1; // 主角推理成功
  PROTAGONIST_GUESS_FAIL = 2; // 主角推理失败
  MAX_LOOPS_REACHED = 3; // 达到最大循环次数
  SPECIFIC_INCIDENT_TRIGGERED = 4; // 特定事件触发
  ALL_INCIDENTS_PREVENTED = 5; // 所有（指定）事件被阻止
  CUSTOM_CONDITION = 6; // 自定义条件（通过Condition组合）
}
