id: 101
name: "Basic Tragedy Set X"
description: "A starter script focusing on core mechanics and roles. Includes a variety of role abilities and loss conditions."

# Main plot configurations. (IDs 1000-1999)
main_plots:
  1001:
    id: 1001
    name: "Murder Plan"
    type: PLOT_TYPE_MAIN_PLOT
    role_assignments:
      3001: 1
      3002: 1
      3003: 1
    description: ""
  1002:
    id: 1002
    name: "The Sealed Item"
    type: PLOT_TYPE_MAIN_PLOT
    role_assignments:
      3003: 1
      3004: 1
    description: "Loss condition: Tragedy at Loop End if there is 2 intrigue on the Shrine."
  1003:
    id: 1003
    name: "Sign with me"
    type: PLOT_TYPE_MAIN_PLOT
    role_assignments:
      3001: 1
    description: "Script creation rule: Key Person must be a girl. Loss condition: Tragedy at Loop End if there is 2 intrigue on the Key Person."
  1004:
    id: 1004
    name: "Change of Future"
    type: PLOT_TYPE_MAIN_PLOT
    role_assignments:
      3004: 1
      3005: 1
    description: "Loss condition: Tragedy at Loop End if 'Butterfly Effect' has occurred this loop."
  1005:
    id: 1005
    name: "Giant Time Bomb"
    type: PLOT_TYPE_MAIN_PLOT
    role_assignments:
      3013: 1
    description: "Loss condition: Tragedy at Loop End if there is 2 intrigue on the Witch's starting location."

# Sub plot configurations. (IDs 2000-2999)
sub_plots:
  2004:
    id: 2004
    name: "An Unsettling Rumor"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3007: 1
    description: "Optional Mastermind Ability (1/loop): You may place 1 intrigue on any location."
  2011:
    id: 2011
    name: "Circle of Friends"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3006: 2
      3007: 1
    description: ""
  2012:
    id: 2012
    name: "A Love Affair"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3008: 1
      3009: 1
    description: ""
  2013:
    id: 2013
    name: "The Hidden Freak"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3010: 1
      3006: 1
    description: ""
  2014:
    id: 2014
    name: "Paranoia Virus"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3007: 1
    description: "Mandatory Always: All persons with at least 3 paranoia turn into Serial Killers."
  2015:
    id: 2015
    name: "Threads of Fate"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments: {}
    description: "Mandatory Loop Start: Place 2 paranoia on all characters who had goodwill last loop."
  2016:
    id: 2016
    name: "Unknown Factor X"
    type: PLOT_TYPE_SUB_PLOT
    role_assignments:
      3011: 1
    description: ""

# Role configurations. (IDs 3000-3999)
# Assumption: Character death is represented by adding a "Dead" trait.
# Placeholder logic is used where the protobuf definitions do not directly support the desired game mechanic.
# These sections are marked with comments and require engine-side implementation.
roles:
  # Key Person (ID: 3001)
  3001:
    id: 3001
    name: "Key Person"
    limit: 1
    abilities:
      # Loss condition: Tragedy Always
      # [This character dies.] ⇒ The loop ends immediately.
      300101:
        id: 300101
        name: "Tragedy Always: Death of the Key Person"
        description: "If this character dies, the loop ends immediately."
        trigger_type: TRIGGER_TYPE_ON_GAME_EVENT
        event_filters: [GAME_EVENT_TYPE_TRAIT_ADDED]
        is_mandatory: true
        conditions:
          - compound_condition:
              operator: OPERATOR_AND
              sub_conditions:
                - trait_condition:
                    target: { triggering_character: {} }
                    trait: "Dead"
                - role_condition:
                    target: { triggering_character: {} }
                    role_id: 3001 # Key Person
        effect:
          end_game:
            winner: PLAYER_ROLE_MASTERMIND
            reason: "The Key Person has died."

  # Killer (ID: 3002)
  3002:
    id: 3002
    name: "Killer"
    limit: 1
    abilities:
      # [Optional Day End] [The Key Person has at least 2 Intrigue and is in this character‘s location] ⇒ Kill the Key Person
      300201:
        id: 300201
        name: "Optional Day End: Assassinate"
        description: "At the end of the day, if the Key Person has 2+ Intrigue and is at your location, you may kill them."
        trigger_type: TRIGGER_TYPE_ON_DAY_END
        refusal_role: PLAYER_ROLE_MASTERMIND
        conditions:
          - stat_condition:
              target: { character_with_role_id: 3001 } # Key Person
              stat_type: STAT_TYPE_INTRIGUE
              comparator: GREATER_THAN_OR_EQUAL_TO
              value: 2
          - location_condition:
              target: { character_with_role_id: 3001 } # Key Person
              # ENGINE-SIDE LOGIC: The engine must resolve the action_user's location
              # and check if the Key Person is there.
              # Placeholder for: location == action_user.location
        effect:
          add_trait:
            target: { character_with_role_id: 3001 } # Key Person
            trait: "Dead"
      # [Optional Loss condition: Protagonists Death Day End] [This character has at least 4 Intrigue]
      300202:
        id: 300202
        name: "Loss Condition: Uncontrollable Urges"
        description: "If this character has 4 or more Intrigue at the end of the day, the Protagonists lose."
        trigger_type: TRIGGER_TYPE_ON_DAY_END
        is_mandatory: true
        conditions:
          - stat_condition:
              target: { action_user: {} } # The Killer
              stat_type: STAT_TYPE_INTRIGUE
              comparator: GREATER_THAN_OR_EQUAL_TO
              value: 4
        effect:
          end_game:
            winner: PLAYER_ROLE_MASTERMIND
            reason: "The Killer was consumed by their urges."

  # Brain (ID: 3003)
  3003:
    id: 3003
    name: "Brain"
    limit: 1
    abilities:
      # [Optional Mastermind Ability] You may place 1 Intrigue on this location or on any character in this location.
      300301:
        id: 300301
        name: "Mastermind Ability: Scheme"
        description: "You may place 1 Intrigue on this location or on any character in this location."
        trigger_type: TRIGGER_TYPE_ON_PHASE_START

        refusal_role: PLAYER_ROLE_MASTERMIND
        requires_choice: true
        effect:
          compound_effect:
            operator: OPERATOR_CHOOSE_ONE
            sub_effects:
              - adjust_stat: # On location
                  # ENGINE-SIDE LOGIC: The engine must interpret this as adding intrigue to the location itself.
                  target: { action_user: {} }
                  stat_type: STAT_TYPE_INTRIGUE
                  amount: 1
              - adjust_stat: # On character at location
                  # ENGINE-SIDE LOGIC: The engine will present a choice of characters at the user's location.
                  target: { action_user: {} }
                  stat_type: STAT_TYPE_INTRIGUE
                  amount: 1

  # Cultist (ID: 3004)
  3004:
    id: 3004
    name: "Cultist"
    limit: 1
    abilities:
      # [Optional Card resolve] You may ignore all Forbid Intrigue effects on this location and on all characters in this location.
      300401:
        id: 300401
        name: "Card Resolve: Fanatical Devotion"
        description: "You may ignore all Forbid Intrigue effects on this location and on all characters in this location."
        trigger_type: TRIGGER_TYPE_ON_PHASE_START
        
        refusal_role: PLAYER_ROLE_PROTAGONIST
        # ENGINE-SIDE LOGIC: This is a rule-modifying ability. The engine must recognize this trait.
        effect:
          add_trait:
            target: { action_user: {} }
            trait: "IgnoresForbidIntrigueThisTurn"

  # Time Traveler (ID: 3005)
  3005:
    id: 3005
    name: "Time Traveler"
    limit: 1
    abilities:
      # [Mandatory Card resolve] Ignore Forbid Goodwill on this character.
      300501:
        id: 300501
        name: "Mandatory Card Resolve: Paradox Shield"
        description: "Ignore Forbid Goodwill on this character."
        trigger_type: TRIGGER_TYPE_ON_PASSIVE
        is_mandatory: true
        is_passive: true
        # ENGINE-SIDE LOGIC: This is a rule-modifying ability. The engine must recognize this trait.
        effect:
          add_trait:
            target: { action_user: {} }
            trait: "IgnoresForbidGoodwill"
      # [Loss condition: Tragedy Day End, Last Day] [There is 2 or less Goodwill on this character.] ⇒ Loop ends
      300502:
        id: 300502
        name: "Loss Condition: Fading Existence"
        description: "On the last day, if this character has 2 or less Goodwill, the loop ends."
        trigger_type: TRIGGER_TYPE_ON_DAY_END
        is_mandatory: true
        conditions:
          - day_condition:
              comparator: EQUAL_TO
              day: -1 # ENGINE-SIDE LOGIC: Special value for the last day.
          - stat_condition:
              target: { action_user: {} }
              stat_type: STAT_TYPE_GOODWILL
              comparator: LESS_THAN_OR_EQUAL_TO
              value: 2
        effect:
          end_game:
            winner: PLAYER_ROLE_MASTERMIND
            reason: "The Time Traveler faded from existence."

  # Friend (ID: 3006)
  3006:
    id: 3006
    name: "Friend"
    limit: 1
    abilities:
      # [Loss condition: Tragedy Loop End] [This character is dead.] ⇒ Reveal its role.
      300601:
        id: 300601
        name: "Tragedy Loop End: A Friend's Truth"
        description: "If this character is dead at the end of the loop, their role is revealed."
        trigger_type: TRIGGER_TYPE_ON_LOOP_END
        is_mandatory: true
        conditions:
          - trait_condition:
              target: { action_user: {} }
              trait: "Dead"
        effect:
          reveal_role:
            target: { action_user: {} }
      # [Mandatory Loop Start] [This role has been revealed] ⇒ This character gets 1 Goodwill.
      300602:
        id: 300602
        name: "Loop Start: Revealed Friendship"
        description: "If this character's role has been revealed, they start the loop with 1 extra Goodwill."
        trigger_type: TRIGGER_TYPE_ON_LOOP_START
        is_mandatory: true
        conditions:
          - event_history_condition:
              event_type: GAME_EVENT_TYPE_ROLE_REVEALED
              lookback_days: 100 # Look back across all previous loops
              event_target: { action_user: {} }
              count: 1
              comparator: GREATER_THAN_OR_EQUAL_TO
        effect:
          adjust_stat:
            target: { action_user: {} }
            stat_type: STAT_TYPE_GOODWILL
            amount: 1

  # Conspiracy Theorist (ID: 3007)
  3007:
    id: 3007
    name: "Conspiracy Theorist"
    limit: 1
    abilities:
      # [Optional Mastermind Ability] You may place 1 Paranoia on any character in this location.
      300701:
        id: 300701
        name: "Mastermind Ability: Spread Paranoia"
        description: "You may place 1 Paranoia on any character in this location."
        trigger_type: TRIGGER_TYPE_ON_PHASE_START

        refusal_role: PLAYER_ROLE_MASTERMIND
        requires_choice: true
        effect:
          adjust_stat:
            # ENGINE-SIDE LOGIC: The engine will present a choice of characters at the user's location.
            target: { action_user: {} }
            stat_type: STAT_TYPE_PARANOIA
            amount: 1

  # Lover (ID: 3008)
  3008:
    id: 3008
    name: "Lover"
    limit: 1
    abilities:
      # [Mandatory Always] [The Loved One dies] ⇒ This character gets 6 Paranoia.
      300801:
        id: 300801
        name: "Mandatory Always: Heartbreak"
        description: "If the Loved One dies, this character gains 6 Paranoia."
        trigger_type: TRIGGER_TYPE_ON_GAME_EVENT
        event_filters: [GAME_EVENT_TYPE_TRAIT_ADDED]
        is_mandatory: true
        conditions:
          - compound_condition:
              operator: OPERATOR_AND
              sub_conditions:
                - trait_condition:
                    target: { triggering_character: {} }
                    trait: "Dead"
                - role_condition:
                    target: { triggering_character: {} }
                    role_id: 3009 # Loved One's role ID
        effect:
          adjust_stat:
            target: { character_with_role_id: 3008 } # The Lover
            stat_type: STAT_TYPE_PARANOIA
            amount: 6

  # Loved One (ID: 3009)
  3009:
    id: 3009
    name: "Loved One"
    limit: 1
    abilities:
      # [Mandatory Always] [The Lover dies] ⇒ This character gets 6 Paranoia.
      300901:
        id: 300901
        name: "Mandatory Always: Grief"
        description: "If the Lover dies, this character gains 6 Paranoia."
        trigger_type: TRIGGER_TYPE_ON_GAME_EVENT
        event_filters: [GAME_EVENT_TYPE_TRAIT_ADDED]
        is_mandatory: true
        conditions:
          - compound_condition:
              operator: OPERATOR_AND
              sub_conditions:
                - trait_condition:
                    target: { triggering_character: {} }
                    trait: "Dead"
                - role_condition:
                    target: { triggering_character: {} }
                    role_id: 3008 # Lover's role ID
        effect:
          adjust_stat:
            target: { character_with_role_id: 3009 } # The Loved One
            stat_type: STAT_TYPE_PARANOIA
            amount: 6
      # [Optional Loss condition: Protagonists Death Day End] [This character has at least 3 Paranoia and at least 1 Intrigue.]
      300902:
        id: 300902
        name: "Loss Condition: Despair"
        description: "If this character has 3+ Paranoia and 1+ Intrigue at the end of the day, the Protagonists lose."
        trigger_type: TRIGGER_TYPE_ON_DAY_END
        is_mandatory: true
        conditions:
          - compound_condition:
              operator: OPERATOR_AND
              sub_conditions:
                - stat_condition:
                    target: { action_user: {} }
                    stat_type: STAT_TYPE_PARANOIA
                    comparator: GREATER_THAN_OR_EQUAL_TO
                    value: 3
                - stat_condition:
                    target: { action_user: {} }
                    stat_type: STAT_TYPE_INTRIGUE
                    comparator: GREATER_THAN_OR_EQUAL_TO
                    value: 1
        effect:
          end_game:
            winner: PLAYER_ROLE_MASTERMIND
            reason: "The Loved One fell into despair."

  # Serial Killer (ID: 3010)
  3010:
    id: 3010
    name: "Serial Killer"
    limit: 1
    abilities:
      # [Mandatory Day End] [There is exactly 1 other (living) character in this location] ⇒ That character dies.
      301001:
        id: 301001
        name: "Mandatory Day End: Hunt"
        description: "If there is exactly one other living character at your location at the end of the day, that character dies."
        trigger_type: TRIGGER_TYPE_ON_DAY_END
        is_mandatory: true
        conditions:
          - location_character_count_condition:
              # ENGINE-SIDE LOGIC: The engine must resolve the action_user's location dynamically.
              location: LOCATION_TYPE_UNSPECIFIED # Placeholder for action_user's location
              comparator: EQUAL_TO
              count: 2 # Serial Killer + 1 other
        effect:
          add_trait:
            # ENGINE-SIDE LOGIC: The engine must resolve who the "other" character is (not the action_user).
            target: { action_user: {} } # Placeholder
            trait: "Dead"

  # Factor (ID: 3011)
  3011:
    id: 3011
    name: "Factor"
    limit: 1
    abilities:
      # [Mandatory Always] [There is at least 2 Intrigue on the School] ⇒ This character gains the Conspiracy Theorist‘s ability, but not its role.
      301101:
        id: 301101
        name: "Always: Absorb Conspiracy"
        description: "If there is 2+ Intrigue on the School, this character gains the Conspiracy Theorist's ability."
        trigger_type: TRIGGER_TYPE_ON_PASSIVE
        is_mandatory: true
        conditions:
          - stat_condition:
              # ENGINE-SIDE LOGIC: This requires checking a stat on a location, not a character.
              target: { all_characters_at_location: "LOCATION_TYPE_SCHOOL" }
              stat_type: STAT_TYPE_INTRIGUE
              comparator: GREATER_THAN_OR_EQUAL_TO
              value: 2
        effect:
          grant_ability:
            target: { action_user: {} }
            ability_id: 300701 # Conspiracy Theorist's ability ID
      # [Mandatory Always] [There is at least 2 Intrigue on the City] ⇒ This character gains the Key Person’s ability, but not its role.
      301102:
        id: 301102
        name: "Always: Absorb Importance"
        description: "If there is 2+ Intrigue on the City, this character gains the Key Person's ability."
        trigger_type: TRIGGER_TYPE_ON_PASSIVE
        is_mandatory: true
        conditions:
          - stat_condition:
              # ENGINE-SIDE LOGIC: This requires checking a stat on a location.
              target: { all_characters_at_location: "LOCATION_TYPE_CITY" }
              stat_type: STAT_TYPE_INTRIGUE
              comparator: GREATER_THAN_OR_EQUAL_TO
              value: 2
        effect:
          grant_ability:
            target: { action_user: {} }
            ability_id: 300101 # Key Person's ability ID

  # Curmudgeon (ID: 3012)
  3012:
    id: 3012
    name: "Curmudgeon"
    limit: 2
    abilities:
      # [Mandatory Always] [This character has 2 or more Goodwill] ⇒ They lose all Goodwill and gain 1 Paranoia.
      301201:
        id: 301201
        name: "Always: Grumpy Demeanor"
        description: "If this character has 2 or more Goodwill, they lose all Goodwill and gain 1 Paranoia."
        trigger_type: TRIGGER_TYPE_ON_PASSIVE
        is_mandatory: true
        conditions:
          - stat_condition:
              target: { action_user: {} }
              stat_type: STAT_TYPE_GOODWILL
              comparator: GREATER_THAN_OR_EQUAL_TO
              value: 2
        effect:
          compound_effect:
            operator: OPERATOR_SEQUENCE
            sub_effects:
              - adjust_stat:
                  target: { action_user: {} }
                  stat_type: STAT_TYPE_GOODWILL
                  amount: -100 # Effectively remove all goodwill
              - adjust_stat:
                  target: { action_user: {} }
                  stat_type: STAT_TYPE_PARANOIA
                  amount: 1

  # Witch (ID: 3013)
  3013:
    id: 3013
    name: "Witch"
    limit: 1
    abilities:
      # [Optional Mastermind Ability] You may place 1 Intrigue on this location.
      301301:
        id: 301301
        name: "Mastermind Ability: Curse"
        description: "You may place 1 Intrigue on this location."
        trigger_type: TRIGGER_TYPE_ON_PHASE_START

        refusal_role: PLAYER_ROLE_MASTERMIND
        effect:
          adjust_stat:
            # ENGINE-SIDE LOGIC: The engine must interpret this as adding intrigue to the location itself.
            target: { action_user: {} }
            stat_type: STAT_TYPE_INTRIGUE
            amount: 1

# Incident configurations. (IDs 4000-4999)
incidents:
  4001:
    name: "Murder"
    description: "One (1) other character in culprit’s Location dies"
  4002:
    name: "Increasing Unease"
    description: "Place 2 :paranoia: on any character, then 1 :intrigue: on any other character."
  4003:
    name: "Foul Evil"
    description: "Place 2 :intrigue: on the Shrine."
  4004:
    name: "Suicide"
    description: "The culprit dies."
    effect:
      add_trait:
        target: { culprit: {} }
        trait: "Dead"
  4005:
    name: "Hospital Incident"
    description: "Prerequisite: 1 :intrigue: on the Hospital, Everyone in the Hospital dies. Prerequisite: 2 :intrigue: on the Hospital, Mandatory Loss condition: Protagonists Death."
  4006:
    name: "Faraway Murder"
    description: "One character with at least 2 :intrigue: dies."
  4007:
    name: "Missing Person"
    description: "Move culprit to any Location. Put 1 :intrigue: on that Location."
  4008:
    name: "Spreading"
    description: "Remove 2 :goodwill: (or 1 if they only have that) from a character, and then add 2 :goodwill: to another character."
  4009:
    name: "Butterfly Effect"
    description: "Put any counter on any character in culprit’s Location."

# Character configurations. (IDs 5000-5999)
characters:
  5001:
    id: 5001
    name: "Boy Student"
    traits: ["student", "boy"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_SCHOOL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        description: "-1 paranoia on student in same location."
  5002:
    id: 5002
    name: "Girl Student"
    traits: ["student", "girl"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_SCHOOL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        description: "-1 paranoia on student in same location."
  5003:
    id: 5003
    name: "Rich Man’s Daughter"
    traits: ["student", "girl"]
    paranoia_limit: 1
    initial_location: LOCATION_TYPE_SCHOOL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        restricted_to_location: [LOCATION_TYPE_SCHOOL, LOCATION_TYPE_CITY]
        description: "+1 goodwill on character in same location."
  5004:
    id: 5004
    name: "Class Rep"
    traits: ["student", "girl"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_SCHOOL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        times_per_loop: 1
        description: "Leader gets one (1×∞) card back."
  5005:
    id: 5005
    name: "Mystery Boy"
    traits: ["student", "boy"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_SCHOOL
    rules:
      - name: "Not in Plots"
        description: "Always has a role not associated with current plot."
    abilities:
      - type: ABILITY_TYPE_PASSIVE
        description: "Always has a role not associated with current plot."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        immune_to_goodwill_refusal: true
        description: "Reveal own role."
  5006:
    id: 5006
    name: "Shrine Maiden"
    traits: ["student", "girl"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_SHRINE
    blocked_locations: [LOCATION_TYPE_CITY]
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        restricted_to_location: [LOCATION_TYPE_SHRINE]
        description: "-1 intrigue on Shrine."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        times_per_loop: 1
        description: "Reveal role of character in same location"
  5007:
    id: 5007
    name: "Alien"
    traits: ["girl"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_SHRINE
    blocked_locations: [LOCATION_TYPE_HOSPITAL]
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 4
        times_per_loop: 1
        description: "Kill one character in same location."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        times_per_loop: 1
        description: "Revive one corpse in same location."
  5008:
    id: 5008
    name: "Godly Being"
    traits: ["man", "woman"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_SHRINE
    rules:
      - name: "Enters on Loop"
        delayed_entry_effect:
          day_of_entry: 1 # Placeholder, should be script-specified
    abilities:
      - type: ABILITY_TYPE_PASSIVE
        description: "Enters game on predefined loop"
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        times_per_loop: 1
        description: "Reveal culprit for 1 incident."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        description: "-1 intrigue on same location or Character in same location."
  5009:
    id: 5009
    name: "Police Officer"
    traits: ["man", "adult"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_CITY
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 4
        times_per_loop: 1
        description: "Reveal culprit for former incident."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        times_per_loop: 1
        description: "Put an Extra marker on another character in same location. Remove that marker to prevent that character from dying."
  5010:
    id: 5010
    name: "Office Worker"
    traits: ["man", "adult"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_CITY
    blocked_locations: [LOCATION_TYPE_SCHOOL]
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        description: "Reveal own role."
  5011:
    id: 5011
    name: "Informer"
    traits: ["woman", "adult"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_CITY
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        times_per_loop: 1
        description: "Leader names the title of any Subplot. Then, the Mastermind must name the title of any other active subplot."
  5012:
    id: 5012
    name: "Pop Idol"
    traits: ["girl", "student"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_CITY
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        description: "-1 paranoia on character in same location."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 4
        description: "+1 goodwill on character in same location."
  5013:
    id: 5013
    name: "Journalist"
    traits: ["adult", "man"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_CITY
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        description: "+1 paranoia on character in same location."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        description: "+1 goodwill on character in same location."
  5014:
    id: 5014
    name: "Boss"
    traits: ["adult", "man"]
    paranoia_limit: 4
    initial_location: LOCATION_TYPE_CITY
    rules:
      - name: "Turf"
        turf_selection_effect:
          possible_locations: [LOCATION_TYPE_CITY, LOCATION_TYPE_SCHOOL, LOCATION_TYPE_SHRINE, LOCATION_TYPE_HOSPITAL]
    abilities:
      - type: ABILITY_TYPE_PASSIVE
        description: "May be regarded as in his turf."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 5
        times_per_loop: 1
        description: "Reveal role of character in his turf."
  5015:
    id: 5015
    name: "Doctor"
    traits: ["adult", "man"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_HOSPITAL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        description: "+/-1 paranoia on character in same location."
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        description: "revoke location restirction for patient."
  5016:
    id: 5016
    name: "Patient"
    traits: ["boy"]
    paranoia_limit: 2
    initial_location: LOCATION_TYPE_HOSPITAL
    blocked_locations: [LOCATION_TYPE_CITY, LOCATION_TYPE_SCHOOL, LOCATION_TYPE_SHRINE]
    abilities: []
  5017:
    id: 5017
    name: "Nurse"
    traits: ["adult", "woman"]
    paranoia_limit: 3
    initial_location: LOCATION_TYPE_HOSPITAL
    abilities:
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 2
        immune_to_goodwill_refusal: true
        description: "-1 paranoia on panicked character in same location. This ability cannot be refused by goodwill Refusel."
  5018:
    id: 5018
    name: "Henchman"
    traits: ["adult", "man"]
    paranoia_limit: 1
    initial_location: LOCATION_TYPE_CITY
    rules:
      - name: "Mastermind Chooses Start"
        special_movement_rule:
          description: "Mastermind chooses start location each loop"
    abilities:
      - type: ABILITY_TYPE_PASSIVE
        description: "Mastermind chooses start location each loop"
      - type: ABILITY_TYPE_ACTIVE
        goodwill_rank: 3
        description: "Dose not trigger incidents."


# Mastermind card configurations. (IDs 6000-6999)
mastermind_cards:
  6001:
    id: 6001
    name: "Move"
    type: CARD_TYPE_MOVE_HORIZONTALLY
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - move_character: {}
  6002:
    id: 6002
    name: "Add Paranoia"
    type: CARD_TYPE_PARANOIA_PLUS
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_PARANOIA
            amount: 1
  6003:
    id: 6003
    name: "Add Goodwill"
    type: CARD_TYPE_GOODWILL_PLUS
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_GOODWILL
            amount: 1
  6004:
    id: 6004
    name: "Add Intrigue"
    type: CARD_TYPE_INTRIGUE_PLUS
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_INTRIGUE
            amount: 1
  6005:
    id: 6005
    name: "Forbid Goodwill"
    type: CARD_TYPE_FORBID_GOODWILL_INCREASE
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - forbid:
            forbid_type: FORBID_TYPE_GOODWILL_CHANGE
  6006:
    id: 6006
    name: "Forbid Paranoia"
    type: CARD_TYPE_FORBID_PARANOIA_INCREASE
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - forbid:
            forbid_type: FORBID_TYPE_PARANOIA_CHANGE
  6007:
    id: 6007
    name: "Add Intrigue +2"
    type: CARD_TYPE_INTRIGUE_PLUS
    owner_role: PLAYER_ROLE_MASTERMIND
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_INTRIGUE
            amount: 2
    once_per_loop: true

# Protagonist card configurations. (IDs 7000-7999)
protagonist_cards:
  7001:
    id: 7001
    name: "Move"
    type: CARD_TYPE_MOVE_HORIZONTALLY
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - move_character: {}
  7002:
    id: 7002
    name: "Add Paranoia"
    type: CARD_TYPE_PARANOIA_MINUS
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_PARANOIA
            amount: -1
  7003:
    id: 7003
    name: "Add Goodwill"
    type: CARD_TYPE_GOODWILL_PLUS
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_GOODWILL
            amount: 1
  7004:
    id: 7004
    name: "Add Intrigue"
    type: CARD_TYPE_INTRIGUE_PLUS
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_INTRIGUE
            amount: 1
  7005:
    id: 7005
    name: "Forbid MOVEMENT"
    type: CARD_TYPE_FORBID_MOVEMENT
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - forbid:
            forbid_type: FORBID_TYPE_MOVEMENT
  7006:
    id: 7006
    name: "Forbid Paranoia"
    type: CARD_TYPE_FORBID_PARANOIA_INCREASE
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - forbid:
            forbid_type: FORBID_TYPE_PARANOIA_CHANGE
  7007:
    id: 7007
    name: "Forbid Intrigue"
    type: CARD_TYPE_FORBID_INTRIGUE_INCREASE
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - forbid:
            forbid_type: FORBID_TYPE_INTRIGUE_CHANGE
  7008:
    id: 7008
    name: "Add Goodwill +2"
    type: CARD_TYPE_GOODWILL_PLUS
    owner_role: PLAYER_ROLE_PROTAGONIST
    effect:
      sub_effects:
        - adjust_stat:
            stat_type: STAT_TYPE_GOODWILL
            amount: 2
    once_per_loop: true

# Script models (specific scenarios using this script config). (IDs 8000-8999)
script_models:
  8001:
    id: 8001
    metadata:
      title: "Young Women’s Battlefield"
      set:
        - name: "Tragedy Looper"
          number: 3
      tragedy_set: "basicTragedy"
      days_per_loop: 6
      difficulty_sets:
        - number_of_loops: 4
          difficulty: 2
        - number_of_loops: 3
          difficulty: 4
      main_plot:
        - "signWithMe"
      sub_plots:
        - "loveAffair"
        - "hiddenFreak"
      cast:
        boyStudent: { role_name: "person" }
        girlStudent: { role_name: "friend" }
        classRep: { role_name: "lovedOne" }
        shrineMaiden: { role_name: "keyPerson" }
        policeOfficer: { role_name: "person" }
        officeWorker: { role_name: "lover" }
        informer: { role_name: "serialKiller" }
        patient: { role_name: "person" }
        nurse: { role_name: "person" }
      incidents:
        - day: 3
          incident: "foulEvil"
          culprit: "officeWorker"
        - day: 4
          incident: "increasingUnease"
          culprit: "classRep"
        - day: 6
          incident: "suicide"
          culprit: "girlStudent"
      victory_conditions: "See Tragedy Looper Mastermind Handbook"
      story: "See Tragedy Looper Mastermind Handbook"
      mastermind_hints: "See Tragedy Looper Mastermind Handbook"
  8002:
    id: 8002
    metadata:
      title: "Magical Girls' Superiority"
      creator: "M.Hydrome"
      set:
        - name: "New Tragedies"
          number: 3
      difficulty_sets:
        - number_of_loops: 4
          difficulty: 2
        - number_of_loops: 3
          difficulty: 3
      tragedy_set: "basicTragedy"
      main_plot:
        - "signWithMe"
      sub_plots:
        - "unsettlingRumor"
        - "hiddenFreak"
      days_per_loop: 5
      cast:
        popIdol: { role_name: "keyPerson" }
        doctor: { role_name: "conspiracyTheorist" }
        boyStudent: { role_name: "serialKiller" }
        patient: { role_name: "person" }
        teacher: { role_name: "person" }
        richStudent: { role_name: "person" }
        shrineMaiden: { role_name: "friend" }
      incidents:
        - day: 2
          incident: "increasingUnease"
          culprit: "patient"
        - day: 3
          incident: "hospitalIncident"
          culprit: "shrineMaiden"
        - day: 5
          incident: "missingPerson"
          culprit: "boyStudent"
      special_rules:
        - ""
      victory_conditions: |
        This is a script recommended for those who are playing :basicTragedy: for the first time. This is where it begins for real. Now you have 2 Subplots and seven people in the cast. Also, there are 5 days each loop

        That said, the difficulty is still set to very low. Protagonists who come from :firstSteps: won’t feel super confused and will be able to enjoy the extra additions well enough. It’s not difficult to play as Mastermind either. But beware of the Final Guess. If all roles are clear, then you will lose, and that is more stressful than it may seem.
      story: |
        For boys and girls, the world is a constant battlefield. Each tiny little disturbance will shake their inexperienced souls. Especially in this town, where seductors lure with the promise of magic powers – without explaining the consequences

        The school was bubbling with talk. “Spells” and “magic”, and everyone knows that you CAN become a magical girl, if you just sign the contract. Eventually, the :popIdol: will sign, and she will die. Can the Protagonists stop this tragedy from happening?
      mastermind_hints: |
        The best way to win is through the Hospital :horror: and to place :intrigue: on the Idol. This reveals the least information.

        Start day 1 and 2 with :paranoia: +1 on the :patient:, and a bluff and :intrigue: +1 on the Shrine and Hospital respectively.

        Also from day 1, use the :conspiracyTheorist: and trigger :spreading: :paranoia:. If you get some :intrigue: on the Hospital, put 2 :paranoia: on the :shrineMaiden:, and trigger the Hospital :horror:.

        On day 3, you can use the Unsettling Rumor effect to put the second :intrigue: on the Hospital and kill the Protagonists.

        If you can’t seem to get any :intrigue: on the Hospital, put instead 2 :intrigue: on the Idol and if possible, also on the Shrine, :richStudent:, and shrineMaiden. For this, :spreading: :paranoia: and :unsettlingRumor: will help you.

        Hide the :serialKiller: as long as you can and use him to kill the :keyPerson: as your last resort. Killing the :friend: will make the Final Guess easy for the Protagonists, so avoid that as much as possible.

        The Final Guess can easily become your downfall. Either you hide the :conspiracyTheorist: or the :friend:. Try to make it look like a :murder:er or a :brain: instead.

        Victory conditions
        1. At any day end, have the popIdol and the :boyStudent: alone in a location, triggering the :serialKiller: effect and thus the :keyPerson:’s loss condition immediately.

        2. At end of day 3, have at least 1 :intrigue: on the Hospital, at least 2 :paranoia: on the shrineMaiden, and the popIdol in the Hospital, triggering Hospital :horror:, killing the popIdol and triggering the :keyPerson:’s loss condition immediately.

        3. At loop end, have 2 :intrigue: on the popIdol, triggering the loss condition for “Sign with Me”.

        4. At any day end, have the shrineMaiden and the :boyStudent: alone in a location, triggering the :serialKiller: effect and thus the :friend:’s loss condition at loop end.

        5. At end of day 3, have at least 1 :intrigue: on the Hospital, at least 2 :paranoia: on the shrineMaiden who should be in the Hospital, triggering the Hospital :horror:, killing the shrineMaiden, and triggering the :friend:’s loss condition at loop end.

        6. At the end of day 3, have at least 2 :intrigue: on the Hospital, at least 2 :paranoia: on the shrineMaiden, triggering the Hospital :horror: killing the Protagonists.
  8003:
    id: 8003
    metadata:
      title: "The Cat Box"
      creator: "GEnd"
      set:
        - name: "New Tragedies"
          number: 4
      difficulty_sets:
        - number_of_loops: 3
          difficulty: 5
        - number_of_loops: 4
          difficulty: 3
      tragedy_set: "basicTragedy"
      main_plot:
        - "giantTimeBomb"
      sub_plots:
        - "loveAffair"
        - "unknownFactor"
      days_per_loop: 5
      cast:
        nurse: { role_name: "witch" }
        alien: { role_name: "lover" }
        officeWorker: { role_name: "lovedOne" }
        blackCat: { role_name: "factor" }
        richStudent: { role_name: "person" }
        popIdol: { role_name: "person" }
        soldier: { role_name: "person" }
      incidents:
        - day: 1
          incident: "suicide"
          culprit: "richStudent"
        - day: 4
          incident: "missingPerson"
          culprit: "officeWorker"
        - day: 5
          incident: "missingPerson"
          culprit: "alien"
      description: |
        The Cat Box is a perfect script to play as your second :basicTragedy: script. The complexity is slightly higher, and there are now 8 characters in the cast. The idea of this script is to introduce two new things. 
        
        The first is the :mysteryBoy: and the :blackCat:; both a bit strange. It’s a good chance to get to know rather complicated characters. But don’t fret; neither of them will mess up things too badly. 
        
        The second is the trick to find the :witch:, who has mandatory :goodwill: Refusel. This will have the Protagonists learn how to use this technique.
      special_rules:
        - ""
      victory_conditions: |
        1. At loop end, have 2 :intrigue: on the Hospital, triggering the loss condition of “:giantTimeBomb:.”

        2. At any day end, have 3 or more :paranoia: and 1 or more :intrigue: on the :officeWorker:, triggering the :lovedOne:'’s Protagonist kill.
      story: |
        The witch laughs and the cat familiar meows. A mistake in a ritual has summoned a strange existence from another world. And to make matters worse, it fell in love with a human. 
        
        The witch decides to burn the entire town to hide the evidence. But to do that, she needs to stay hidden. Time is of the essence: kill the witch and shut the lid on this box forever.
      mastermind_hints: |
        You can win with either 2 :intrigue: on the Hospital or the ability of the :lovedOne:. Your first choice should be the former, but the latter hides more information. 
        
        First day on loop 1 should be an :intrigue: +2 on the School, an :intrigue: +1 on the Hospital, and a bluff card on the Shrine. Then put an :paranoia: on the :richStudent: using the :conspiracyTheorist: and kill her with :suicide:. This is to give the impression that she might be the :witch: 
        
        After that, try triggering both :missingPerson: Incidents by putting out :paranoia:. Use the :conspiracyTheorist:’s and :factor:’s abilities (Subplot “Unknown :factor:”: Putting 2 :intrigue: on the School makes the :blackCat: able to act as a :conspiracyTheorist:) when you need. Putting :paranoia: on the :officeWorker: is effective both for :missingPerson: and for the :lovedOne: ability. 
        
        Finally, if you can get 2 :intrigue: on the School, Shrine, and Hospital, the first loop is perfected. You can try to get that result in future loops too, but it’ll be hard with Forbid :intrigue: and trying to prevent the Protagonists from finding the :witch: with :goodwill: Refusel. 
        
        It’s super easy to hide the :factor:, so you don’t need to worry about the Final Guess.